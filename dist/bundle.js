(()=>{"use strict";const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let t;const n=new Uint8Array(16);function r(){if(!t&&(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(n)}const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));const i=function(t,n,i){if(e.randomUUID&&!n&&!t)return e.randomUUID();const a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){i=i||0;for(let e=0;e<16;++e)n[i+e]=a[e];return n}return function(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}(a)};var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},c=function(){function e(e,t,n){this._id=i(),this._name=e,this._price=t,this._description=n}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"price",{get:function(){return this._price},set:function(e){this._price=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e},enumerable:!1,configurable:!0}),e.prototype.itemElement=function(){var e=this,t=document.createElement("div");t.classList.add("item-card");var n=document.createElement("h3");n.textContent=this._name,t.appendChild(n);var r=document.createElement("p");r.textContent=this._description,t.appendChild(r);var o=document.createElement("p");o.textContent="Price: $".concat(this._price),t.appendChild(o);var i=document.createElement("button");return i.textContent="Add to Cart",i.addEventListener("click",(function(){var t;null===(t=d.myUser)||void 0===t||t.addToCart(e),d.updateCart()})),t.appendChild(i),t},e}(),u=function(){function e(e,t){this._id=i(),this._name=e,this._age=t,this._cart=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"age",{get:function(){return this._age},set:function(e){this._age=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cart",{get:function(){return this._cart},enumerable:!1,configurable:!0}),e.prototype.addToCart=function(e,t){void 0===t&&(t=1);var n=this._cart.find((function(t){return t.item.id===e.id}));if(n)n.quantity+=t;else{var r={item:e,quantity:t};this._cart.push(r)}},e.prototype.removeFromCart=function(e){this._cart=this._cart.filter((function(t){return t.item.id!==e.id}))},e.prototype.removeQuantityFromCart=function(e,t){var n=this._cart.findIndex((function(t){return t.item.id===e.id}));if(-1!==n){var r=a({},this._cart[n]);r.quantity-=t,r.quantity<=0?this._cart.splice(n,1):this._cart[n]=r}},e.prototype.cartTotal=function(){for(var e=0,t=0,n=this._cart;t<n.length;t++){var r=n[t];e+=r.item.price*r.quantity}return e},e.prototype.printCart=function(){console.log("Cart for ".concat(this._name,":"));for(var e=0,t=this._cart;e<t.length;e++){var n=t[e];console.log("- ".concat(n.item.name," ($").concat(n.item.price,") - Quantity: ").concat(n.quantity))}},e.prototype.cartHTMLElement=function(){for(var e=document.createElement("div"),t=0,n=this._cart;t<n.length;t++){var r=n[t],o=document.createElement("div");o.classList.add("cart-item");var i=document.createElement("h4");i.textContent=r.item.name,o.appendChild(i);var a=document.createElement("p");a.textContent="Quantity: ".concat(r.quantity),o.appendChild(a);var c=document.createElement("p");c.textContent="Price: $".concat(r.item.price),o.appendChild(c);var u=document.createElement("button");u.textContent="Remove One",u.id="removeOne-".concat(r.item.id),o.appendChild(u);var d=document.createElement("button");d.textContent="Remove All",d.id="removeAll-".concat(r.item.id),o.appendChild(d),e.appendChild(o)}return e},e.prototype.addRemoveEventListeners=function(){for(var e=this,t=function(t){document.getElementById("removeOne-".concat(t.item.id)).addEventListener("click",(function(){e.removeQuantityFromCart(t.item,1),d.updateCart()})),document.getElementById("removeAll-".concat(t.item.id)).addEventListener("click",(function(){e.removeFromCart(t.item),d.updateCart()}))},n=0,r=this._cart;n<r.length;n++)t(r[n])},e}(),d=function(){function e(){this._items=[];var e=new c("Red Hat",10,"A stylish red hat"),t=new c("Blue Shirt",20,"A comfortable blue shirt"),n=new c("Green Pants",30,"Trendy green pants"),r=new c("Yellow Dress",25,"A beautiful yellow dress"),o=new c("Black Shoes",40,"Classic black shoes"),i=new c("White Sneakers",35,"Casual white sneakers");this._items.push(e,t,n,r,o,i)}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.showItems=function(){var e=document.getElementById("shop");e.innerHTML="";for(var t=0,n=this._items;t<n.length;t++){var r=n[t].itemElement();e.appendChild(r)}},e.updateCart=function(){var t=document.getElementById("cart");if(t.innerHTML="",e.myUser&&0!==e.myUser.cart.length){var n=e.myUser.cartHTMLElement();t.appendChild(n),e.myUser.addRemoveEventListeners()}else{var r=document.createElement("p");r.textContent="Cart is empty.",t.appendChild(r)}},e}(),s=new d;document.getElementById("cartForm").addEventListener("submit",(function(e){var t;e.preventDefault();var n=document.getElementById("item"),r=document.getElementById("quantity"),o=n.value.trim(),i=parseInt(r.value.trim(),10);if(o&&!isNaN(i)){var a=new c(o,0,"");null===(t=d.myUser)||void 0===t||t.addToCart(a,i),d.updateCart()}else console.log("Invalid item or quantity.")})),document.getElementById("loginForm").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("name"),n=document.getElementById("age"),r=t.value.trim(),o=parseInt(n.value.trim(),10);r&&!isNaN(o)?(d.myUser=new u(r,o),console.log("Logged in as ".concat(d.myUser.name)),console.log("Age: ".concat(d.myUser.age)),s.showItems(),d.updateCart()):console.log("Invalid login credentials.")})),document.getElementById("cartForm").addEventListener("submit",(function(e){var t,n;e.preventDefault();var r=document.getElementById("item"),o=document.getElementById("quantity"),i=r.value.trim(),a=parseInt(o.value.trim(),10)||1;if(i){var c=m.items.find((function(e){return e.name===i}));if(c){var u=null===(t=d.myUser)||void 0===t?void 0:t.cart.find((function(e){return e.item.id===c.id}));u?u.quantity+=a:null===(n=d.myUser)||void 0===n||n.addToCart(c,a),d.updateCart()}else console.log("Item not found in the shop.")}else console.log("Please enter a valid item name.");r.value="",o.value=""}));var m=new d;function l(){return fetch("/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({totalAmount:"10.00"})}).then((function(e){return e.json()})).then((function(e){return e.orderId}))}function p(e){return fetch("/capture-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.orderID})}).then((function(e){return e.json()})).then((function(e){console.log("Payment captured"),console.log(e)}))}function f(e){console.error("PayPal Error:",e)}m.showItems(),d.updateCart(),new Promise((function(e,t){var n=document.createElement("script");n.src="https://www.paypal.com/sdk/js?client-id=AcC-hp1ZzvYcEtMfFm3dW0VpOFqCK1puPW9sIJKMJpKPhgOV0sQ-XONrymST6zHHLc3bTZEPzmLqPQMh",n.onload=e,n.onerror=t,document.head.appendChild(n)})).then((function(){paypal.Buttons({style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal"},createOrder:l,onApprove:p,onError:f}).render("#paypal-button-container")}))})();